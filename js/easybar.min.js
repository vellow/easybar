chrome.runtime.onMessage.addListener(function(c,b,a){Easybar.show_results(c);});var status={mode_1:false,mode_2:false,show:false,derective:false};var mode=false;
var defualt_options={"Shift+Space":"show",Esc:"hide",Up:"prev",Down:"next",Enter:"newtab"};var default_keywords={bkmk:"search_in_bookmark",his:"search_in_history",google:"search_in_google",ddg:"search_in_duckduckgo",ydic:"search_in_ydic"};
var default_options={j:"down",k:"up",h:"left",l:"right",t:"new_tab",f:"find_link"};var handlers={show:"Easybar.show",hide:"Easybar.clear",prev:"Operation.select_prev",next:"Operation.select_next",newtab:"Operation.newtab"};
var url;var Ui={easyDiv:(function(){var a=document.createElement("div");var b='<div id="vomnibar" class="vimiumReset" style="display: none;">									    <div id="sHeader"></div>									    <div class="vimiumReset vomnibarSearchArea">											<input type="text" id="sInput" class="vimiumReset">									    </div>									    <ul class="vimiumReset" id="sReset" style="display: none;"></ul>									</div>';
a.innerHTML=b;a=a.firstChild;return document.body.appendChild(a);})(),sInput:document.getElementById("sInput"),sReset:document.getElementById("sReset"),sHeader:document.getElementById("sHeader"),update_header:function(a){sHeader.innerHTML=a+"...";
}};var Command={search_in_bookmark:function(a){chrome.runtime.sendMessage({type:"bookmark",data:a});},search_in_history:function(a){chrome.runtime.sendMessage({type:"history",data:{text:a}});
},search_in_google:function(a){url="http://google.com/search?q="+a;},search_in_ydic:function(a){console.log("start searching ydic");}};var default_command=Command.search_in_bookmark;
var Easybar={bind_shortcut:function(ops){for(i in ops){shortcut.add(i,eval(handlers[ops[i]]));}},show:function(){command=default_command;Ui.easyDiv.style.display="block";
sInput.focus();sInput.onkeyup=function(a){if(a.keyCode>40||a.keyCode<37){Easybar.delegate();}};},clear:function(){Ui.sInput.value="";Ui.sReset.innerHTML="";
Ui.sHeader.innerHTML="";Ui.sReset.style.display="none";Ui.easyDiv.style.display="none";mode=false;},delegate:function(){var b=Ui.sInput.value.toLowerCase();
if(!mode){var a=b.match(/^(\w+)\s/);if(a&&event.keyCode===32&&default_keywords.hasOwnProperty(a[1])){Ui.sInput.value="";mode=default_keywords[a[1]];console.log(mode+mode.length);
Ui.update_header(mode);Ui.sReset.innerHTML="";Ui.sReset.style.display="block";return;}else{Command.search_in_bookmark(b);}}else{if(mode=="search_in_bookmark"){Command.search_in_bookmark(b);
}else{if(mode=="search_in_history"){Command.search_in_history(b);}else{if(mode=="search_in_google"){Command.search_in_google(b);}else{if(mode=="search_in_ydic"&&event.keyCode==13){console.log("23");
Command.search_in_ydic(b);}else{if(!mode){Command.search_in_bookmark(b);}}}}}}},show_results:function(a){if(a){Ui.sReset.innerHTML=a;Ui.sReset.style.display="block";
Ui.sReset.children[0].classList.add("vomnibarSelected");}else{Ui.sReset.innerHTML="";Ui.sReset.style.display="none";}}};var Operation={select_prev:function(){sSelected=document.getElementsByClassName("vomnibarSelected")[0];
sSelected.classList.remove("vomnibarSelected");if(prev=sSelected.previousElementSibling){prev.classList.add("vomnibarSelected");}else{Ui.sReset.lastChild.classList.add("vomnibarSelected");
}},select_next:function(){sSelected=document.getElementsByClassName("vomnibarSelected")[0];sSelected.classList.remove("vomnibarSelected");if(next=sSelected.nextElementSibling){next.classList.add("vomnibarSelected");
sSelected.classList.remove("vomnibarSelected");}else{Ui.sReset.firstChild.classList.add("vomnibarSelected");}},open_selected:function(){if(sSelected=document.getElementsByClassName("vomnibarSelected")[0]){var a=sSelected.children[1].innerText;
Operation.newtab(a);}},newtab:function(){try{url=document.getElementsByClassName("vomnibarSelected")[0].children[1].innerText;}catch(a){url=url;}if(!url){return;
}chrome.runtime.sendMessage({type:"newtab",data:url},function(){console.log("opening new tab");});}};Easybar.bind_shortcut(defualt_options);